CFLAGS=-c -g -Wall -std=c++11 -Wc++11-compat
LDFLAGS=-L/usr/lib/x86_64-linux-gnu -lOpenCL -g
SOURCES=PixelSearchByTriplet.cpp \
		Event.cpp \
		GpuKernelInvoker.cpp \
		Tools.cpp \
		IndependentEntrypoint.cpp \
		Logger.cpp \
		SerialKernel.cpp

OBJECTS=$(SOURCES:.cpp=.o)
EXECUTABLE=clpixel

all: $(SOURCES) $(EXECUTABLE)
	    
$(EXECUTABLE): $(OBJECTS) 
	    $(CC) $(OBJECTS) $(LDFLAGS) -o $@

.cpp.o:
	    $(CC) $(CFLAGS) $< -o $@

.PHONY: clean check test

check:
	cppcheck . $(SOURCES) --force --enable=all

test:
	tools/test.sh

clean:
		rm -rf $(OBJECTS) $(EXECUTABLE)

